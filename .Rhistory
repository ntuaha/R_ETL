<<<<<<< HEAD
which(' ' %in% words_tbl)
final_tbl[323]
colnames(final_tbl)[323]
' ' %in% colnames(final_tbl)[323]
gsub(' ','',final_tbl)[323])
gsub(' ','', final_tbl)[323])
?gsub
gsub(' ','', final_tbl[323])
gsub(' ','', names(final_tbl)[323])
gsub("\s",'', names(final_tbl)[323])
gsub("\\s",'', names(final_tbl)[323])
colnames(words_tbl)
gsub(' ', '', colnames(words_tbl))
gsub(' ', '', colnames(words_tbl)[230])
gsub(' ', '', colnames(words_tbl)[79])
gsub("\\s", '', colnames(words_tbl)[79])
piece[['2']]
"å¤¯" %in% piece[['2']]
"å¤¯" %in% piece[['3']]
"å¤¯" %in% piece[['4']]
grep('å¤¯', piece[['4']])
piece[['4']]grep('å¤¯', piece[['4']])
piece[['4']][grep('å¤¯', piece[['4']])]
piece[['3']][grep('å¤¯', piece[['3']])]
piece[['2']][grep('å¤¯', piece[['2']])]
plot(disorder_val)
disorder_val <- sapply(words, disorder, USE.NAMES = FALSE)
plot(disorder_val)
names(disorder_val) <- words
plot(disorder_val, xlab='index', ylab = 'value')
slidify('index2.Rmd')
disorder_val <- sapply(words, disorder, USE.NAMES = FALSE)
names(disorder_val) <- words
```
names(disorder_val) <- words
plot(disorder_val, xlab='index', ylab = 'value')
slidify('index2.Rmd')
disorder_val
disorder_val <- sapply(words, disorder, USE.NAMES = FALSE)
names(disorder_val) <- words
plot(disorder_val, xlab='index', ylab = 'value')
slidify::slidify("index2.Rmd")
slidify::slidify("index2.Rmd")
test_words <- names(which(disorder_val > 1))
tail(test_words, 20)
slidify::slidify("index2.Rmd")
slidify::slidify("index2.Rmd")
?which
words[1:10]
words
words_2_5
words_2_5[sample(1000,10)]
words_2_5[sample(1000,10)]
words_2_5[sample(1000,10)]
sample(100, 10)
1:20
which(1:20 > 5)
pracice <- c('ä¿¡ç¾©å€', 'åŒ—å¸‚', 'æˆ¿åƒ¹', 'æˆ¿å¸‚', 'ä¸Šæ¼²')
grep('æˆ¿', practice)
practice <- c('ä¿¡ç¾©å€', 'åŒ—å¸‚', 'æˆ¿åƒ¹', 'æˆ¿å¸‚', 'ä¸Šæ¼²')
grep('æˆ¿', practice)
practice <- sample(20,10)
pracice > 5
which(pracice > 5)
practice <- sample(20,10)
pracice > 10
which(pracice > 5)
pracice
practice
practice <- sample(20,10)
practice > 10
which(practice > 5)
slidify('index2.Rmd')
words_2_5 <- unique(unlist(piece[2:5]))
words_2_5[sample(length(words_2_5),15)]
plot(words_freq[word_2_5], xlab = 'index', ylab = 'count')
plot(words_freq[words_2_5], xlab = 'index', ylab = 'count')
words_freq
words_freq <- table(unlist(piece))
words_freq[c('ä¿¡ç¾©å€', 'åŒ—å¸‚', 'æˆ¿åƒ¹', 'æˆ¿å¸‚', 'ä¸Šæ¼²')]
N <- sum(words_freq[piece[['1']]])
words_prob <- words_freq / N
tail(words_prob, 5)
words_2_5 <- unique(unlist(piece[2:5]))
words_2_5[sample(length(words_2_5),15)]
plot(words_freq[words_2_5], xlab = 'index', ylab = 'count')
practice <- sample(20,10)
practice > 10
which(practice > 5)
practice <- sample(20,10)
practice > 12
which(practice > 12)
words <- names(which(words_freq[words_2_5] > 2))
length(words)
words <- names(which(words_freq[words_2_5] > 5))
length(words)
plot(cohesion_val > 10)
```
cohesion <- function(word){
seg <- segmentWord(word)
val <- sapply(seg, function(x){
f_word <- words_freq[word]
f_x1 <- words_freq[x[1]]
f_x2 <- words_freq[x[2]]
mi <- log2(N) + log2(f_word) - log2(f_x1) - log2(f_x2)
return(mi)
})
return (min(val))
}
cohesion_val <- sapply(words, cohesion, USE.NAMES = FALSE)
words
cohesion_val <- sapply(words, cohesion, USE.NAMES = FALSE)
words_freq
words <- names(which(words_freq[words_2_5] > 2))
words <- names(which(words_freq[words_2_5] > 2))
words
cohesion <- function(word){
seg <- segmentWord(word)
val <- sapply(seg, function(x){
f_word <- words_freq[word]
f_x1 <- words_freq[x[1]]
f_x2 <- words_freq[x[2]]
mi <- log2(N) + log2(f_word) - log2(f_x1) - log2(f_x2)
return(mi)
})
return (min(val))
}
cohesion_val <- sapply(words, cohesion, USE.NAMES = FALSE)
words_freq['å¯Œ']
segmentWord('å¯Œé‚¦')
segmentWord <- function(word){
n <- nchar(word)-1
seg <- lapply(1: n, function(i){
w1 <- substr(word, 1, i)
w2 <- substr(word,i+1, n+1)
c(w1,w2)
})
return(seg)
}
segmentWord('å¯Œé‚¦éŠ€')
segmentWord('å¯Œé‚¦')
titles <- gsub("\\s", "", titles)
piece <- list()
piece[['1']] <- unlist(sapply(titles, ngram, 1, USE.NAMES = FALSE))
piece[['2']] <- unlist(sapply(titles, ngram, 2, USE.NAMES = FALSE))
piece[['3']] <- unlist(sapply(titles, ngram, 3, USE.NAMES = FALSE))
piece[['4']] <- unlist(sapply(titles, ngram, 4, USE.NAMES = FALSE))
piece[['5']] <- unlist(sapply(titles, ngram, 5, USE.NAMES = FALSE))
piece[['6']] <- unlist(sapply(titles, ngram, 6, USE.NAMES = FALSE))
words_freq <- table(unlist(piece))
words_freq[c('ä¿¡ç¾©å€', 'åŒ—å¸‚', 'æˆ¿åƒ¹', 'æˆ¿å¸‚', 'ä¸Šæ¼²')]
words_freq
titles <- gsub("\\s", "", titles)
piece <- list()
piece[['1']] <- unlist(sapply(titles, ngram, 1, USE.NAMES = FALSE))
piece[['2']] <- unlist(sapply(titles, ngram, 2, USE.NAMES = FALSE))
piece[['3']] <- unlist(sapply(titles, ngram, 3, USE.NAMES = FALSE))
piece[['4']] <- unlist(sapply(titles, ngram, 4, USE.NAMES = FALSE))
piece[['5']] <- unlist(sapply(titles, ngram, 5, USE.NAMES = FALSE))
piece[['6']] <- unlist(sapply(titles, ngram, 6, USE.NAMES = FALSE))
segmentWord('å¯Œé‚¦éŠ€')
titles <- gsub("\\s", "", titles)
piece <- list()
piece[['1']] <- unlist(sapply(titles, ngram, 1, USE.NAMES = FALSE))
library(slidify)
setwd('~/R_ETL/')
slidify('index2.Rmd')
plot(cohesion_val > 10)
cohesion_val
cohesion_val <- sapply(words, cohesion, USE.NAMES = FALSE)
names(cohesion_val) <- words
coh_words <- names(which(cohesion_val > 10))
plot(cohesion_val > 10)
cohesion_val
words
words <- names(which(words_freq[words_2_5] > 2))
words
cohesion_val <- sapply(words, cohesion, USE.NAMES = FALSE)
names(cohesion_val) <- words
coh_words <- names(which(cohesion_val > 10))
plot(cohesion_val > 10)
plot(cohesion_val)
disorder_val <- sapply(coh_words, disorder, USE.NAMES = FALSE)
names(disorder_val) <- words
names(disorder_val) <- coh_words
tail(names(sort(disorder_val)), 15)
plot(disorder_val, xlab='index', ylab = 'value')
tail(names(sort(disorder_val)), 15)
head(names(sort(disorder_val)), 15)
dis_words <- names(which(disorder_val > 1))
dis_words <- names(which(disorder_val > 1))
tail(dis_words, 20)
tmp <- lapply(dis_words, function(word) str_count(titles, word))
words_tbl <- do.call(cbind, tmp)
colnames(words_tbl) <- dis_words
rownames(words_tbl) <- dates
edit(words_tbl)
words_tbl <- do.call(cbind, tmp)
colnames(words_tbl) <- dis_words
fix(words_tbl)
rownames(words_tbl) <- dates
fix(words_tbl)
words_tbl[1:6, sample(ncol(words_tbl), 8)]
words_tbl <- do.call(cbind, tmp)
colnames(words_tbl) <- dis_words
words_tbl_xts <- xts(words_tbl, as.POSIXct(dates))
fix(words_tbl_xts)
words_tbl_xts
words_tbl_xts["2014-01-18/2014-01-20", 100:110]
ep.weeks <- endpoints(words_tbl_xts, "weeks", k=1)
count.weeks <- period.apply(words_tbl_xts, ep.weeks, FUN=colSums)
count.weeks["2014-01/2014-02", 100:110]
xts::indexTZ(words_tbl_xts)
rownames(words_tbl_xts)
?xts::lastof
?xts::align.time
x <- Sys.time() + 1:1000
# every 10 seconds
align.time(x, 10)
x
x <- Sys.time() + 1:10
# every 10 seconds
align.time(x, 10)
x <- Sys.time() + 1:10
x
align.time(x, 10)
?xts::adj.time
?xts::apply.weekly
xts.ts <- xts(rnorm(231),as.Date(13514:13744,origin="1970-01-01"))
xts.ts
start(xts.ts)
end(xts.ts)
apply.monthly(xts.ts,mean)
?xts::.indexmday
ep.weeks <- endpoints(words_tbl_xts, "weeks", k=1)
count.weeks <- period.apply(words_tbl_xts, ep.weeks, FUN=colSums)
count.weeks["2014-01/2014-02", 100:110]
mystocks <- readRDS('jiawei/mystocks.rds')
mystocks.return <- diff(mystocks, 1) / mystocks
words_tbl[1:6,100:105]
head(return.status)
cl <- kmeans(mystocks.return_all, 5)
return.status <- data.frame(cl$cluster)
return.status
return.status == 5
mystocks.return_all[return.status == 5]
mean(mystocks.return_all[return.status == 5])
status <- sapply(1:5, function(i){
mean(mystocks.return_all[return.status == i])
})
status
c('1'=1)
c('1'=1, '2=6')
c('1'=1, '2'=6)
c('a'=1, 'b'=6)
sort(c('a'=1, 'b'=6))
sort(c('a'=1, 'b'=6, 'c'=3))
x = c()
x = append(x, 'a'=1)
x['a'] = 1
x['b'] = 6
x['c'] = 3
sort(x)
status = c()
for(i in 1:5){
status[i] <- mean(mystocks.return_all[return.status == i])
}
status <- sort(status)
status
status = c()
for(i in 1:5){
i = as.character(i)
status[i] <- mean(mystocks.return_all[return.status == i])
}
status <- sort(status)
status
head(return.status)
words_tbl[1:6,100:105]
head(return.status)
head(dcast(return.status, return_date  ~ cl.cluster, fill = 0))
for(i in names(status)){
print(i)
}
return.status
gsub('5', 'abc', return.status)
gsub('5', 'abc', return.status[,1])
gsub('5', 'abc', return.status[1])
cl$cluster
gsub('5', 'abc', cl$cluster)
cl$cluster
status = c()
for(i in 1:5){
i = as.character(i)
status[i] <- mean(mystocks.return_all[cl$cluster == i])
}
status <- sort(status)
status
?list
status = list()
status[[1]] = c('è·Œå¤š','è·Œå°‘','ä¸è®Š','æ¼²å°‘','æ¼²å¤š')
for(i in 1:5){
i = as.character(i)
status[[2]][i] <- mean(mystocks.return_all[cl$cluster == i])
}
status = list()
status[[1]] = c('è·Œå¤š','è·Œå°‘','ä¸è®Š','æ¼²å°‘','æ¼²å¤š')
status[[2]] = c()
for(i in 1:5){
i = as.character(i)
status[[2]][i] <- mean(mystocks.return_all[cl$cluster == i])
}
status[[2]]
status = list()
status[[1]] = c('è·Œå¤š','è·Œå°‘','ä¸è®Š','æ¼²å°‘','æ¼²å¤š')
status[[2]] = c()
status[[2]]
status[2]
status[2][1]
status[2][2]
status[[2]]
status
status[2] = c()
status[2][1] = 1
status[[2]]
status[2][5] = 5
status[2]
status[2]['b'] = 5
status = list()
status[[1]] = c('è·Œå¤š','è·Œå°‘','ä¸è®Š','æ¼²å°‘','æ¼²å¤š')
status
status[[2]] = c('')
status
for(i in 1:5){
i = as.character(i)
status[[2]][i] <- mean(mystocks.return_all[cl$cluster == i])
}
status
status = list()
status[[1]] = c('è·Œå¤š','è·Œå°‘','ä¸è®Š','æ¼²å°‘','æ¼²å¤š')
status[[2]] = c()
for(i in 1:5){
i = as.character(i)
status[[2]][i] <- mean(mystocks.return_all[cl$cluster == i])
}
for(i in 1:5){
i = as.character(i)
s2[i] <- mean(mystocks.return_all[cl$cluster == i])
}
s1 = c('è·Œå¤š','è·Œå°‘','ä¸è®Š','æ¼²å°‘','æ¼²å¤š')
s2 = c()
for(i in 1:5){
i = as.character(i)
s2[i] <- mean(mystocks.return_all[cl$cluster == i])
}
s2
s2 <- sort(s2)
2
s2
s3 <- cl$cluster
for(i in 1:5){
s3 <- gsub(names(s2)[i], s1[i], s3)
}
s3
s2
cl$cluster
s1 = c('è·Œå¤š','è·Œå°‘','ä¸è®Š','æ¼²å°‘','æ¼²å¤š')
s2 = c()
for(i in 1:5){
i = as.character(i)
s2[i] <- mean(mystocks.return_all[cl$cluster == i])
}
s2 <- sort(s2)
for(i in 1:5){
cl$cluster <- gsub(names(s2)[i], s1[i], s3)
}
return.status <- data.frame(cl$cluster)
return.status
head(return.status)
words_tbl[1:6,100:105]
head(return.status)
head(return.status)
head(dcast(return.status, return_date  ~ cl.cluster, fill = 0))
return.status
return.status <- data.frame(cl$cluster)
return.status
return.status <- data.frame(return_date, cl$cluster)
head(return.status)
words_tbl[1:6,100:105]
head(dcast(return.status, return_date  ~ cl.cluster, fill = 0))
return.status <- data.frame(cl$cluster)
head(return.status)
return.status <- data.frame(cl$cluster, rep(nrow, 1))
return.status <- data.frame(cl$cluster, rep(nrow(cl$cluster), 1))
return.status <- data.frame(cl$cluster, rep(length(cl$cluster), 1))
head(return.status)
return.status <- data.frame(cl$cluster, rep(1, length(cl$cluster)))
return.status
head(return.status)
return.status <- data.frame(cluster=cl$cluster, count=rep(1, length(cl$cluster)))
return.status
head(dcast(return.status, return_date  ~ cluster, fill = 0))
return.status <- data.frame(cluster=cl$cluster, count=rep(1, length(cl$cluster)))
head(return.status)
mystocks.return_all
names(mystocks.return_all)
return.status
return_date <- names(mystocks.return_all)
return.status <- cbind(return_date, "status"=return.status)
return.status
head(return.status)
dcast(return.status, return_date  ~ cl.cluster, fill = 0)
return.status <- cbind(date=return_date, "status"=return.status)
head(return.status)
return_date <- names(mystocks.return_all)
return_date <- names(mystocks.return_all)
return.status <- cbind('date'=return_date, 'status'=return.status)
head(return.status)
return.status <- data.frame(cluster=cl$cluster, count=rep(1, length(cl$cluster)))
head(return.status)
return_date <- names(mystocks.return_all)
return.status
head(dcast(return.status, return_date  ~ cluster, fill = 0))
dcast(return.status, return_date  ~ cl.cluster, fill = 0)
dcast(return.status, return_date  ~ cl.cluster, fill = 0)
return.status
dcast(return.status, return_date  ~ cluster, fill = 0)
dcast(return.status, return_date  ~ cluster, fill = 0)
dcast(return.status, return_date  ~ cluster, fill = 0)
return_date <- names(mystocks.return_all)
return.status <- dcast(return.status, return_date  ~ cluster, fill = 0)
return.status
head(return.status)
class(return.status)
return.status <- data.frame(return.status,stringsAsFactors=FALSE)
return.status.xts <- xts(return.status[,-1], as.POSIXct(return_date))
head(return.status.xts)
return_date <- names(mystocks.return_all)
return.status <- dcast(return.status, return_date  ~ cluster, fill = 0)
cl <- kmeans(mystocks.return_all, 5)
s1 = c('è·Œå¤š','è·Œå°‘','ä¸è®Š','æ¼²å°‘','æ¼²å¤š')
s2 = c()
for(i in 1:5){
i = as.character(i)
s2[i] <- mean(mystocks.return_all[cl$cluster == i])
}
s2 <- sort(s2)
for(i in 1:5){
cl$cluster <- gsub(names(s2)[i], s1[i], s3)
}
return.status <- data.frame(cluster=cl$cluster, count=rep(1, length(cl$cluster)))
return_date <- names(mystocks.return_all)
return.status <- dcast(return.status, return_date  ~ cluster, fill = 0)
head(return.status)
return.status.xts <- xts(return.status[,-1], as.POSIXct(return_date))
return.status.xts
head(return.status.xts)
final_tbl <- merge.xts(words_tbl_xts, return.status.xts, fill=0)
names(final_tbl) <- c(test_words_2, names(return.status[,-1]))
names(final_tbl) <- c(dis_words, names(return.status[,-1]))
tmp <- dim(final_tbl)[2]
final_tbl[1:6, (tmp-8):tmp]
tbl_cov <- cov(final_tbl)
d <- dist(t(final_tbl),  method = "manhattan")
d2 <- as.matrix(d)
score <- sort(d2[,'X1'])
words <- names(score)
score <- sort(d2[,'è·Œå¤š'])
words <- names(score)
head(data.frame(words), 10)
score <- sort(d2[,'æ¼²å¤š'])
words <- names(score)
head(data.frame(words), 10)
kw <- list()
for(col in c('è·Œå¤š','è·Œå°‘','ä¸è®Š','æ¼²å°‘','æ¼²å¤š')){
kw <- cbind(kw, names(head(sort(d2[,col]), 10)))
}
kw
slidify("index2.Rmd")
index <- str_extract(titles, "é‡åŠƒ|æ‰€å¾—")
titles[!is.na(index)]
index <- str_extract(titles, "ç¸½éŠ·|æ‹›æ¨™")
titles[!is.na(index)]
fit <- cmdscale(d2, eig = TRUE, k=2)
x <- fit$points[,1]
y <- fit$points[,2]
plot(x, y, xlab="Coordinate 1", ylab="Coordinate 2", type = "n")
text(x, y, labels = row.names(t(final_tbl)), cex=.7)
slidify('index2.Rmd')
slidify('index2.Rmd')
slidify("index2.Rmd")
slidify("index2.Rmd")
cl
head(cl$cluster)
cl$cluster
cl$cluster
cl <- kmeans(mystocks.return_all, 5)
cl$cluster
cl$cluster[1:5]
slidify("index2.Rmd")
s2
slidify("index2.Rmd")
slidify("index2.Rmd")
slidify("index2.Rmd")
slidify("index2.Rmd")
slidify("index2.Rmd")
slidify("index2.Rmd")
slidify("index2.Rmd")
slidify("index2.Rmd")
slidify("index2.Rmd")
slidify("index2.Rmd")
slidify("index2.Rmd")
slidify("index2.Rmd")
=======
install.packages('devtools')
library(devtools)
devtools::install_github("RSe­lenium", "johndharrison")
devtools::install_github("RSe­lenium", "johndharrison")
devtools::install_github('RSelenium', "johndharrison")
devtools::install_github('RSelenium', 'johndharrison')
install.packages('XML')
install.packages('rcURL')
install.packages('RCurl')
install.packages("RCurl")
devtools::install_github('RSelenium', 'johndharrison')
library("RCurl", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
remove.packages("RCurl")
devtools::install_github('RSelenium', 'johndharrison')
install.packages('RCurl')
install.packages("RCurl")
devtools::install_github('RSelenium', 'johndharrison')
devtools::install_github("RSelenium", "johndharrison")
library(RSelenium)
install.packages("RSelenium")
devtools::install_github("RSelenium", "johndharrison")
require(RSelenium)
pJS <- phantom()
pJS <- phantom()
require(RSelenium)
pJS <- phantom()
require(RSelenium)
pJS <- phantom()
require(RSelenium)
pJS <- phantom()
RSelenium::startServer()
checkForServer
checkForServer()
RSelenium::startServer()
checkForServer()
RSelenium::startServer()
RSelenium::startServer()
eCap <- list(phantomjs.binary.path = "C:/Users/john/Desktop/phantomjs.exe")
remDr <- remoteDriver(browserName = "phantomjs", extraCapabilities = eCap)
remDr$open()
RSelenium::startServer()
require(RSelenium)
pJS <- phantom()
RSelenium::startServer()
eCap <- list(phantomjs.binary.path = "C:/Users/john/Desktop/phantomjs.exe")
remDr <- remoteDriver(browserName = "phantomjs", extraCapabilities = eCap)
remDr$open()
eCap <- list(phantomjs.binary.path = "~/Downloads/phantomjs-1.9.7-macosx/bin/")
remDr <- remoteDriver(browserName = "phantomjs", extraCapabilities = eCap)
remDr$open()
eCap
eCap <- list(phantomjs.binary.path = "~/Downloads/phantomjs-1.9.7-macosx/bin/phantomjs")
remDr <- remoteDriver(browserName = "phantomjs", extraCapabilities = eCap)
remDr$open()
eCap
remDr <- remoteDriver(browserName = "phantomjs", extraCapabilities = eCap)
remDr$open()
?phantom
pJS <- phantom()
remDr <- remoteDriver(browserName = "phantomjs", extraCapabilities = eCap)
phantom(pjs_cmd = '~/Downloads/phantomjs-1.9.7-macosx/bin/phantomjs')
phantom(pjs_cmd = '~/Downloads/phantomjs-1.9.7-macosx/bin/phantomjs', port = 4444
)
phantom(pjs_cmd = '/Users/apple/Downloads/phantomjs-1.9.7-macosx/bin/')
phantom(pjs_cmd = '/Users/apple/Downloads/phantomjs-1.9.7-macosx/bin/phantomjs')
pJS <- phantom()
library(RSelenium)
startServer()
checkForServer()
remDr <- remoteDriver()
remDr
remDr$open()
remDr$open()
remDr$navigate('www.google.com')
remDr$open()
remDr$navigate('www.google.com')
remDr$navigate('www.yahoo.com')
remDr$navigate("www.google.com")
library(RSelenium)
startServer()
remDr <- remoteDriver()
remDr$open()
remDr <- remoteDriver()
remDr$open()
remDr$open()
remDr$navigate('www.google.com')
remDr <- remoteDriver()
remDr$open()
remDr$navigate('www.google.com')
remDr <- remoteDriver(browserName = "safari")
remDr$open()
remDr$navigate('www.google.com')
remDr <- remoteDriver(browserName = "safari")
remDr$open()
remDr$navigate('www.google.com')
title <- list()
for(i in 1:10){
url <- sprintf('https://tw.news.yahoo.com/real-estate/archive/%d.html', i)
remDr$navigate(url)
doc <- remDr$findElements("xpath", "//ul/li/div/div/h4/a")
tmp <- sapply(doc, function(doc){
doc$getElementText()})
title <- append(title, tmp)
}
install.packages('DSC2014Tutorial', repo = c('http://taiwanrusergroup.github.io/R', 'http://cran.csie.ntu.edu.tw'))
install.packages('DSC2014Tutorial', repo = 'http://taiwanrusergroup.github.io/R')
install.packages('DSC2014Tutorial', repo = 'http://taiwanrusergroup.github.io/R')
install.packages('DSC2014Tutorial', repo = c('http://taiwanrusergroup.github.io/R', 'http://cran.csie.ntu.edu.tw'))
install.packages('DSC2014Tutorial', repo = c('http://taiwanrusergroup.github.io/R/bin/windows/contrib/3.1/PACKAGES
', 'http://cran.csie.ntu.edu.tw'))
install.packages('DSC2014Tutorial', repo = c('http://taiwanrusergroup.github.io/R', 'http://cran.csie.ntu.edu.tw'))
deps <- available.packages("http://taiwanrusergroup.github.io/R")[1,"Depends"]
pkgs <- strsplit(gsub("\\s", "", deps), ",")[[1]]
for(pkg in pkgs) {
# You can change your favorite repository
install.packages(pkg, repo = "http://cran.csie.ntu.edu.tw")
}
install.packages('DSC2014Tutorial', repo = 'http://taiwanrusergroup.github.io/R', type = 'source')
library(RSelenium)
startServer()
remDr <- remoteDriver(browserName = "safari")
remDr$open()
remDr$open('www.yahoo.com.tw')
remDr$navigate('www.yahoo.com.tw')
remDr$screenshot()
title <- list()
for(i in 1:10){
url <- sprintf('https://tw.news.yahoo.com/real-estate/archive/%d.html', i)
remDr$navigate(url)
doc <- remDr$findElements("xpath", "//ul/li/div/div/h4/a")
tmp <- sapply(doc, function(doc){
doc$getElementText()})
title <- append(title, tmp)
}
install.packages('DSC2014Tutorial')
install.packages('DSC2014Tutorial', repo = c('http://taiwanrusergroup.github.io/R', 'http://cran.csie.ntu.edu.tw'))
install.packages('DSC2014Tutorial', repo = c('http://taiwanrusergroup.github.io/R', 'http://cran.csie.ntu.edu.tw'))
install.packages('DSC2014Tutorial')
install.packages('DSC2014Tutorial', repo = c('http://taiwanrusergroup.github.io/R', 'http://cran.csie.ntu.edu.tw'))
install.packages('DSC2014Tutorial')
library(RSelenium)
checkForServer
startServer()
remDr <- remoteDriver(browserName = "firefox") # mac å¯ç”¨ safari
remDr$open()
library(RSelenium)
startServer()
remDr <- remoteDriver(browserName = "firefox") # mac å¯ç”¨ safari
remDr$open()
remDr <- remoteDriver(browserName = "safari") # mac å¯ç”¨ safari
remDr$open()
title <- list()
for(i in 1:10){
url <- sprintf('https://tw.news.yahoo.com/real-estate/archive/%d.html', i)
remDr$navigate(url)
doc <- remDr$findElements("xpath", "//ul/li/div/div/h4/a")
tmp <- sapply(doc, function(doc){
doc$getElementText()})
title <- append(title, tmp)
}
remDr$navigate('www.google.com')
webElem <- remDr$findElement(using = 'xpath', "//*/input[@id = 'gbqfq']")
remDr$open()
remDr$navigate('www.google.com')
webElem <- remDr$findElement(using = 'xpath', "//*/input[@id = 'gbqfq']")
remDr$navigate("http://www.google.com/ncr")
webElem <- remDr$findElement(using = 'id', value = "gbqfq")
webElem$getElementAttribute("id")
webElem$sendKeysToElement(list("R Cran", "\uE007"))
webElem$sendKeysToElement(list("æˆ¿åœ°ç”¢", "\uE007"))
webElem$sendKeysToElement(list("æˆ¿åœ°ç”¢"))
webElem$sendKeysToElement(list("æˆ¿åœ°ç”¢", "\uE007"))
webElem$sendKeysToElement(list("R Cran", key = "enter"))
webElem$sendKeysToElement(list("", key = "enter"))
remDr$navigate("http://www.google.com/ncr")
webElem <- remDr$findElement(using = 'id', value = "gbqfq")
webElem$sendKeysToElement(list("R Cran", key = "enter"))
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
webElems <- remDr$findElements(using = 'css selector', "li.g h3.r")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
resHeaders
remDr$navigate("http://www.google.com/ncr")
webElem <- remDr$findElement(using = 'id', value = "gbqfq")
webElem$sendKeysToElement(list("æˆ¿åœ°ç”¢", key = "enter"))
webElems <- remDr$findElements(using = 'css selector', "li.g h3.r")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
webElem2 <- remDr$findElement(using = 'id', value = "pn")
remDr$navigate("http://www.google.com/ncr")
webElem <- remDr$findElement(using = 'id', value = "lst-ib")
remDr$navigate("http://www.google.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'lst-ib']"))
remDr$navigate("http://www.google.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'lst-ib']")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'lst-ib']")
remDr$navigate("http://www.google.com")
webElem <- remDr$findElement(using = "xpath", "//tbody/tr/td/div/input[@id = 'lst-ib']")
webElem <- remDr$findElement(using = "xpath", "//tbody/tr/td/div/input[@id = 'lst-ib']")
remDr$navigate("https://tw.news.yahoo.com/")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'yuhead-sform-searchfield']")
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
resHeaders
remDr$navigate("https://tw.news.yahoo.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'yuhead-sform-searchfield']")
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
webElems <- remDr$findElements(using = "id", value = "pg-next")
webElem$sendKeysToElement(list(key = "enter"))
webElems$sendKeysToElement(list(key = "enter"))
webElems <- remDr$findElements(using = "id", value = "pg-next")
webElems
webElems <- remDr$findElement(using = "id", value = "pg-next")
webElems$sendKeysToElement(list(key = "enter"))
webElems$sendKeysToElement(list('',key = "enter"))
webElems
webElems$clickElement()
remDr$navigate("https://tw.news.yahoo.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'yuhead-sform-searchfield']")
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
title <- list()
for(i = 1:4){
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
title <- append(title, resHeaders)
webElems <- remDr$findElements(using = "id", value = "pg-next")
webElems$clickElement()
}
for(i = 1:5){i}
title <- list()
for(i in 1:4){
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
title <- append(title, resHeaders)
webElems <- remDr$findElements(using = "id", value = "pg-next")
webElems$clickElement()
}
remDr$navigate("https://tw.news.yahoo.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'yuhead-sform-searchfield']")
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
title <- list()
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
title <- append(title, resHeaders)
webElems <- remDr$findElements(using = "id", value = "pg-next")
webElems$clickElement()
webElems
webElems
webElems <- remDr$findElements(using = "id", value = "pg-next")
webElems
remDr$navigate("https://tw.news.yahoo.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'yuhead-sform-searchfield']")
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
title <- list()
for(i in 1:4){
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
title <- append(title, resHeaders)
webElems <- remDr$findElement(using = "id", value = "pg-next")
webElems$clickElement()
}
library(RSelenum)
library(RSelenium)
startServer()
remDr <- remoteDriver(browserName = "firefox") # mac å¯ç”¨ safari
remDr$open()
remDr$navigate("https://tw.news.yahoo.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'yuhead-sform-searchfield']")
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
title <- list()
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
title <- append(title, resHeaders)
webElems <- remDr$findElement(using = "id", value = "pg-next")
webElems$clickElement()
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
title <- append(title, resHeaders)
webElems <- remDr$findElement(using = "id", value = "pg-next")
webElems$clickElement()
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
title <- append(title, resHeaders)
webElems <- remDr$findElement(using = "id", value = "pg-next")
webElems$clickElement()
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
title <- append(title, resHeaders)
webElems <- remDr$findElement(using = "id", value = "pg-next")
webElems$clickElement()
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
title <- append(title, resHeaders)
webElems <- remDr$findElement(using = "id", value = "pg-next")
webElems$clickElement()
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
title <- append(title, resHeaders)
webElems <- remDr$findElement(using = "id", value = "pg-next")
webElems$clickElement()
title
remove(title)
remove(webElem)
remove(webElems)
remDr$navigate("https://tw.news.yahoo.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'yuhead-sform-searchfield']")
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
sleep(1)
?sleep
Sys.sleep(3)
title <- list()
for(i in 1:4){
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
title <- append(title, resHeaders)
webElems <- remDr$findElement(using = "id", value = "pg-next")
webElems$clickElement()
Sys.sleep(1)
}
remDr$navigate("https://tw.news.yahoo.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'yuhead-sform-searchfield']")
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
remDr$navigate("https://tw.news.yahoo.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'yuhead-sform-searchfield']")
remDr$navigate("https://tw.news.yahoo.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'yuhead-sform-searchfield']")
webElem$clickElement()
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
remDr$navigate("https://tw.news.yahoo.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'yuhead-sform-searchfield']")
webElem$clickElement()
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
remDr$navigate("https://tw.news.yahoo.com")
webElem <- remDr$findElement(using = "xpath", "//*/input[@id = 'yuhead-sform-searchfield']")
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
remDr$navigate("https://tw.news.yahoo.com")
webElem <- remDr$findElement(using = "id", "p")
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
remDr$navigate("https://tw.news.yahoo.com")
remDr$navigate("https://tw.yahoo.com/")
webElem <- remDr$findElement(using = "id", "p")
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
remove(title)
title <- list()
for(i in 1:10){
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
title <- append(title, resHeaders)
webElems <- remDr$findElement(using = "id", value = "pg-next")
webElems$clickElement()
Sys.sleep(1)
}
remDr$navigate("https://tw.yahoo.com/")
webElem <- remDr$findElement(using = "id", "p")
webElem$sendKeysToElement(list("æˆ¿åƒ¹", key = "enter"))
search_title <- list()
for(i in 1:10){
webElems <- remDr$findElements(using = "xpath", "//li/div/div/h3/a")
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
search_title <- append(search_title, resHeaders)
webElems <- remDr$findElement(using = "id", value = "pg-next")
webElems$clickElement()
}
doc_2 <- do.call(rbind, search_title)
writeLines(doc_2, "search_yahoo.txt")
getwd()
getwd
library(slidify)
library(slidfy)
install.packages('devtools')
install_github("slidify", "ramnathv")
install_github("slidifyLibraries", "ramnathv")
library(devtools)
install_github("slidify", "ramnathv")
install_github("slidifyLibraries", "ramnathv")
library(slidify)
slidify("index.Rmd")
getwd()
setwd('~/R_ETL/')
slidify("index.Rmd")
install.packages('gdata')
install.packages('dplyr')
install.packages('stringr')
install.packages("stringr")
slidify("index.Rmd")
install.packages("Defaults")
slidify("index.Rmd")
install.packages("DSC2014Tutorial")
install.packages('DSC2014Tutorial', repo = c('http://taiwanrusergroup.github.io/R', 'http://cran.csie.ntu.edu.tw'))
>>>>>>> d0ca289b045d964f7f6fc36cfee83c8934c2c512
